{"version":3,"sources":["..\\..\\node_modules\\insert-css\\index.js","..\\script\\lib\\InlineCss.ts","..\\script\\lib\\AsyncScript.ts","..\\script\\env.ts","..\\script\\tool\\str-to-str.ts"],"names":[],"mappings":"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","file":"405522659a971a84466d1b6979c193de.map","sourcesContent":["var containers = []; // will store container HTMLElement references\nvar styleElements = []; // will store {prepend: HTMLElement, append: HTMLElement}\n\nvar usage = 'insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).';\n\nfunction insertCss(css, options) {\n    options = options || {};\n\n    if (css === undefined) {\n        throw new Error(usage);\n    }\n\n    var position = options.prepend === true ? 'prepend' : 'append';\n    var container = options.container !== undefined ? options.container : document.querySelector('head');\n    var containerId = containers.indexOf(container);\n\n    // first time we see this container, create the necessary entries\n    if (containerId === -1) {\n        containerId = containers.push(container) - 1;\n        styleElements[containerId] = {};\n    }\n\n    // try to get the correponding container + position styleElement, create it otherwise\n    var styleElement;\n\n    if (styleElements[containerId] !== undefined && styleElements[containerId][position] !== undefined) {\n        styleElement = styleElements[containerId][position];\n    } else {\n        styleElement = styleElements[containerId][position] = createStyleElement();\n\n        if (position === 'prepend') {\n            container.insertBefore(styleElement, container.childNodes[0]);\n        } else {\n            container.appendChild(styleElement);\n        }\n    }\n\n    // strip potential UTF-8 BOM if css was read from a file\n    if (css.charCodeAt(0) === 0xFEFF) { css = css.substr(1, css.length); }\n\n    // actually add the stylesheet\n    if (styleElement.styleSheet) {\n        styleElement.styleSheet.cssText += css\n    } else {\n        styleElement.textContent += css;\n    }\n\n    return styleElement;\n};\n\nfunction createStyleElement() {\n    var styleElement = document.createElement('style');\n    styleElement.setAttribute('type', 'text/css');\n    return styleElement;\n}\n\nmodule.exports = insertCss;\nmodule.exports.insertCss = insertCss;\n","/**\n * YJC <https://github.com/yangjc> @2018-03-22\n */\n\n'use strict';\n\nimport { insertCss } from 'insert-css';\nimport { readFileSync } from 'fs';\n\nexport function insertBaseStyle(): HTMLStyleElement {\n    return insertCss(readFileSync(`${__dirname}/../../style/base.css`, 'utf8'));\n}\n","/**\n * YJC <https://github.com/yangjc> @2018-03-22\n */\n\n'use strict';\n\nexport function loadScript(src: string, onLoad?: () => void, onError?: (e: ErrorEvent) => void) {\n    let script: HTMLScriptElement | null = document.createElement('script');\n    script.async = true;\n    typeof onLoad === 'function' && (script.onload = onLoad);\n    typeof onError === 'function' && (script.onerror = onError);\n    script.src = src;\n    (document.getElementsByTagName('body')[0] || document.documentElement).appendChild(script);\n    script = null;\n}\n\nexport interface ScriptOnLoadActions {\n    onLoad?: () => void;\n    onError?: (e: ErrorEvent | Error) => void;\n    onLoading?: () => void;\n}\n\ninterface LoadScriptState {\n    [src: string]: string | ErrorEvent | Error;\n}\n\nconst loadScriptState: LoadScriptState = {};\n\nexport function loadScriptActions(src: string | Error, actions?: ScriptOnLoadActions) {\n    if (typeof src !== 'string') {\n        actions && actions.onError && actions.onError(src as Error);\n        return;\n    }\n\n    if (Object.prototype.hasOwnProperty.call(loadScriptState, src)) {\n        switch (loadScriptState[src]) {\n            case 'loading':\n                actions && actions.onLoading && actions.onLoading();\n                return;\n            case 'loaded':\n                actions && actions.onLoad && actions.onLoad();\n                return;\n            default:\n                if (typeof loadScriptState[src] !== 'undefined') {\n                    actions && actions.onError && actions.onError(loadScriptState[src] as ErrorEvent);\n                }\n        }\n    }\n\n    loadScriptState[src] = 'loading';\n    loadScript(src, () => {\n        loadScriptState[src] = 'loaded';\n        actions && actions.onLoad && actions.onLoad();\n    }, (e) => {\n        loadScriptState[src] = e;\n        actions && actions.onError && actions.onError(e);\n    });\n}\n","/**\n * YJC <https://github.com/yangjc> @2018-03-22\n */\n\n'use strict';\n\nexport function getDepSrc(fileName: string): string {\n    return `../dep/${fileName}`;\n}\n\nexport function getPageSrc(id: string): string | Error {\n    const a = document.getElementById(`src-${id}`) as HTMLAnchorElement;\n    if (a && a.href) {\n        return a.href;\n    }\n    return new Error(`Can't find #src-${id}.`);\n}\n","/**\n * YJC <https://github.com/yangjc> @2018-03-21\n */\n\n'use strict';\n\nimport { insertBaseStyle } from '../lib/InlineCss';\nimport { loadScriptActions } from '../lib/AsyncScript';\nimport { getPageSrc } from '../env';\n\ninterface OutputAction {\n    (inEle: HTMLTextAreaElement, outEle: HTMLTextAreaElement, targetEle: HTMLElement): void;\n}\n\ninterface OutputActions {\n    [moduleName: string]: OutputAction;\n}\n\ninsertBaseStyle();\n\nfunction getAsyncAction(moduleName: string): OutputAction {\n    return (inEle, outEle, ele) => {\n        loadScriptActions(getPageSrc(moduleName), {\n            onLoad: () => {\n                if (!window.globalModules || !window.globalModules[moduleName]) {\n                    return showTip(`Unexpected global module \"${moduleName}\".`);\n                }\n                const fn = ele.getAttribute('data-fn');\n                if (typeof window.globalModules[moduleName][fn!] !== 'function') {\n                    return showTip(`${moduleName}[${fn}] should be function.`);\n                }\n                try {\n                    setOutput(outEle, window.globalModules[moduleName][fn!](inEle.value));\n                } catch (e) {\n                    showTip(e.message);\n                }\n            },\n            onLoading: () => showTip(`Loading global module \"${moduleName}\".`),\n            onError: e => showTip(`Load global module \"${moduleName}\" failed: ${e.message}`),\n        });\n    };\n}\n\nfunction showTip(message: string) {\n    document.getElementById('tip')!.innerText = message;\n}\n\nconst defaultActions: OutputActions = {\n    'out-to-in': (inEle, outEle) => {\n        inEle.value = outEle.value;\n        setInputLength(inEle.value.length);\n    },\n    'hide-input': (inEle, outEle, ele) => {\n        if (ele.innerText === 'Show Input') {\n            inEle.className = inEle.className.replace('hide-input', '');\n            ele.innerText = 'Hide Input';\n        } else {\n            inEle.className += ' hide-input';\n            ele.innerText = 'Show Input';\n        }\n    },\n};\n\nfunction bindAction(ele: HTMLButtonElement, actions: OutputActions) {\n    const moduleName = ele.getAttribute('data-module');\n    if (!moduleName) {\n        return;\n    }\n    \n    let action: OutputAction | undefined;\n    if (actions.hasOwnProperty(moduleName)) {\n        action = actions[moduleName];\n    } else if (ele.getAttribute('data-fn')) {\n        action = getAsyncAction(moduleName);\n    } else {\n        return;\n    }\n\n    const inEle = document.getElementById('input') as HTMLTextAreaElement;\n    const outEle = document.getElementById('output') as HTMLTextAreaElement;\n    ele.onclick = () => {\n        try {\n            action!(inEle, outEle, ele);\n        } catch (e) {\n            showTip(e.message);\n        }\n    };\n}\n\nfunction setInputLength(length: number) {\n    document.getElementById('input-length')!.innerText = `I:${length}`;\n}\nfunction setOutput(outEle: HTMLTextAreaElement, output: string) {\n    outEle.value = output;\n    document.getElementById('output-length')!.innerText = `O:${output.length}`;\n    showTip('');\n}\n\nfunction bindActions(actions: OutputActions) {\n    const inEle = document.getElementById('input') as HTMLTextAreaElement;\n    inEle.oninput = inEle.onchange = () => {\n        setInputLength(inEle.value.length);\n    };\n\n    const ele = document.getElementById('actions')!.getElementsByTagName('button');\n    for (let i = 0; i < ele.length; i++) {\n        bindAction(ele[i], actions);\n    }\n}\n\nbindActions(defaultActions);\nwindow.globalModules = {};\n"]}